!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("blurify",t):e.blurify=t()}(this,function(){"use strict";function e(e){function t(){i++,i==e.length&&r(n)}var n=[],i=0,r=function(){};return e="object"!=(void 0===e?"undefined":o(e))?[e]:e,e.map(function(e,o){n[o]=new Image,n[o].crossOrigin="*",n[o].src=e.dataset.src,n[o].onload=function(){t()},n[o].onerror=function(){t()}}),{done:function(e){r=e||r}}}function t(){var e=document.createElement("div"),t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1];return 1===arguments.length?t in e.style:2===arguments.length&&(e.style[t]=n,!!e.style[t])}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();return function(){function o(e){n(this,o),this.options=e,this.blur=e.blur||6,this.mode=e.mode||"css",this.$els=1===e.images.nodeType?[e.images]:[].slice.call(e.images),"auto"==this.mode?t("filter","blur(1px)")?this.useCSSMode():this.useCanvasMode():"css"==this.mode?this.useCSSMode():this.useCanvasMode()}return i(o,[{key:"useCSSMode",value:function(){var e=this;this.$els.map(function(t){t.src=t.dataset.src,t.style.filter=t.style["-webkit-filter"]="blur("+e.options.blur+"px)"})}},{key:"useCanvasMode",value:function(){var t=this;this.imageType=this.options.imageType||"image/jpeg",e(this.$els).done(function(e){e.map(function(e,n){t.$els[n].src=t.getDataURL(e)})})}},{key:"blurify",value:function(e,t){var n=e.getContext("2d");n.globalAlpha=.5;for(var o=-t;o<=t;o+=2)for(var i=-t;i<=t;i+=2)n.drawImage(e,i,o),i>=0&&o>=0&&n.drawImage(e,-(i-1),-(o-1));n.globalAlpha=1}},{key:"getDataURL",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),this.blurify(t,this.blur),t.toDataURL(this.imageType)}}]),o}()});
//# sourceMappingURL=blurify.min.js.map
